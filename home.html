<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Task Management</title>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <META NAME="KEYWORDS" CONTENT="WoodandMortar LLC, WoodandMortar, Wood and Mortar, Bid Consultants, home improvement, home repair, house repair, house improvement, design, home design, designers, kitchen remodel, bathroom remodel, cement, stone, veneer, kitchen, bathroom, veneer stone, Painters, Painting, fireplace, tile, home repair, Contractors, Home, Home Renovations, Wood, wood&mortar, wood & mortar, brick, stucco, Wood and Mortar, WoodandMortar">
      <META NAME="ROBOTS" CONTENT="ALL,FOLLOW">
          <meta name="description" content="Subcontracting Simplified">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <link rel="apple-touch-icon" sizes="180x180" href="pics/wm.png">
              <link rel="icon" type="image/png" href="pics/wm.png" sizes="32x32">
              <link rel="icon" type="image/png" href="pics/wm.png" sizes="16x16">
              <link rel="mask-icon" href="pics/wm.png" color="#fff">
              <link rel="shortcut icon" href="pics/wm.png">
      <script src="https://apis.google.com/js/platform.js" async defer></script>
      <meta name="google-signin-client_id" content="930580119599-2j4jj0rjjdr7vkrurdsq5ecnsqm029tb.apps.googleusercontent.com">
      <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>

            <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123535120-1"></script>
            <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'UA-123535120-1');
            </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<script src="https://kit.fontawesome.com/bdd89edb33.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="./home.css">

<style>

/* The Modal (background) */
.modal {
  display: block; /* Hidden by default */
  position: absolute; /* Stay in place */
  z-index: 9999999999999999999999999999999; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

</style>

</head>
<body>
<!-- partial:index.partial.html -->


<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
    <p id="loginModal">Please Login</p>
  </div>

</div>

<div class="container">
 <div class="user-profile-area">
  <div class="side-wrapper">
   <div class="user-profile">
    <div id="fName" class="user-name">Please Login</div>
    <div id="gEmail" class="user-mail">Pending Login</div>
   </div>
   <div class="user-notification">
    <div class="notify">

      <input type="color" value="#4d76fd" style="z-index:999;left:-37;opacity:0;" class="colorpicker" id="colorpicker"></input>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="currentColor" style="position:absolute; left:-37;">
       <path d="M13.533 5.6h-.961a.894.894 0 01-.834-.57.906.906 0 01.197-.985l.675-.675a.466.466 0 000-.66l-1.32-1.32a.466.466 0 00-.66 0l-.676.677a.9.9 0 01-.994.191.906.906 0 01-.56-.837V.467A.467.467 0 007.933 0H6.067A.467.467 0 005.6.467v.961c0 .35-.199.68-.57.834a.902.902 0 01-.983-.195L3.37 1.39a.466.466 0 00-.66 0L1.39 2.71a.466.466 0 000 .66l.675.675c.25.25.343.63.193.995a.902.902 0 01-.834.56H.467A.467.467 0 000 6.067v1.866c0 .258.21.467.467.467h.961c.35 0 .683.202.834.57a.904.904 0 01-.197.984l-.675.676a.466.466 0 000 .66l1.32 1.32a.466.466 0 00.66 0l.68-.68a.894.894 0 01.994-.187.897.897 0 01.556.829v.961c0 .258.21.467.467.467h1.866c.258 0 .467-.21.467-.467v-.961c0-.35.202-.683.57-.834a.904.904 0 01.984.197l.676.675a.466.466 0 00.66 0l1.32-1.32a.466.466 0 000-.66l-.68-.68a.894.894 0 01-.187-.994.897.897 0 01.829-.556h.961c.258 0 .467-.21.467-.467V6.067a.467.467 0 00-.467-.467zM7 9.333C5.713 9.333 4.667 8.287 4.667 7S5.713 4.667 7 4.667 9.333 5.713 9.333 7 8.287 9.333 7 9.333z"></svg>
      <div class="inbox-calendar">
       <input id="mainCheck" type="checkbox" class="inbox-calendar-checkbox">
       <div class="toggle-page">
        <span>Inbox</span>
       </div>
       <div class="layer"></div>
      </div>
    </div>
   </div>
   <div class="progress-status"><p><b id="compTasks">0</b>/<b id="planTasks">0</b></p></div>
   <div class="progress">
     <div id="progBar" class="progress-bar"></div>
   </div>
   <div class="task-status">
    <div class="task-stat">
     <div id="compTasks2" class="task-number">0</div>
     <div class="task-condition">Completed</div>
    </div>
    <div class="task-stat">
     <div id="planTasks2" class="task-number">0</div>
     <div class="task-condition">Planned</div>
    </div>
    <div class="task-stat">
     <div id="finishTasks" class="task-number">0%</div>
     <div class="task-condition">Finish</div>
    </div>
    <div class="task-stat">
     <div id="totalSalary" class="task-number">$0</div>
     <div class="task-condition">Salary</div>
    </div>
   </div>
  </div>






  <div id="paperInvoice" style="z-index:9999;display:none;">

    <div id="mail" class="mail-detail">
     <div class="mail-detail-header">
      <div class="mail-detail-profile">
       <div class="mail-detail-name"><b id="code">#</b> | <b id="clientName">Please Login</b></div><div id="invoiceNow" style="display:none;" class="mail-detail-name">-1</div><div id="hiddenLocation" style="display:none;"></div>
       <div id="hashKey" style="display:none;">na</div><div id="flags" style="display:none;">0</div>
      </div>

     </div>
     <div class="mail-contents">
      <div id="mailContent" class="mail-contents-subject">
       <input type="checkbox" name="msg" id="mail20" class="mail-choice" checked>
       <label for="mail20"></label>
       <div id="invoiceAddress" class="mail-contents-title"></div>
      </div>
      <div class="mail">
       <div class="mail-time">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
         <circle cx="12" cy="12" r="10" />
         <path d="M12 6v6l4 2" /></svg>
        Estimated Finish Date: <b id="finish1"></b>
       </div>
       <div class="mail-inside">


  <b id="part1"></b><br>
  <b id="part2"></b><br>
  <b id="part3"></b><br>
  <b id="part4"></b>
  <div class="mail-checklist">
  <input type="checkbox" name="msg" id="mail30" onclick="formAdmin()" class="mail-choice" unchecked>
  <label for="mail30">Clock In</label>
  <div class="mail-checklist-date"><p><script> document.write(new Date().toLocaleDateString()); </script></p></div>
  </div>


       </div>
       <div class="mail-assign">
        <div class="assignee">
         <strong><b id="notes1"></b></strong>
        </div>
        <div class="assignee">
         <strong><b id="modifications1"></b></strong>
        </div>
       </div>

       <div id="invoice" class="mail-doc">
        <div id="invoiceSend" class="mail-doc-wrapper">
         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
          <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" /></svg>
         <div class="mail-doc-detail">
          <div class="mail-doc-name">Invoice: <b id="code2"></b><b id="invoiceNow2" style="display:none;"></b></div>
          <div class="mail-doc-date"><p>Project Date: <b id="startTime2"></b></p></div>
         </div>
        </div>
        <div class="mail-doc-icons">
          <div class="send" onclick="hideInvoice()" style="color: white;">
           <i class="fas fa-times-circle fa-2x"></i>
          </div>
        </div>
       </div>
      </div>
     </div>
    </div>

  </div>







  <div class="main-area">
   <div class="main-container">
    <div id="contracts" class="inbox-container">
     <div class="inbox">
      <div class="msg msg-department anim-y">
        <img id="profilePic" src="pics/amper.gif" alt="" class="user-photo">
       <p>- Subcontract</p>

      </div>
      <popup2></popup2>
     </div>
     <div id="mybtn" class="add-task">
      <button class="add-button" onclick="mybtn.style='display:none;';init()">Available Tasks</button>
     </div>
    </div>


    <div class="calendar-container">
     <div class="calender-tab anim-y">
      <div class="week-month" style="margin:auto;">
       <button class=" button button-task active" onclick="formAdmin();">Today: <script> document.write(new Date().toLocaleDateString()); </script></button>
      </div>
     </div>



     <script>

       var public_spreadsheet_url0 = 'https://docs.google.com/spreadsheets/d/1iwOPspV8n7cdAnM9vRq32nJqUU3tw3dcfM4Uz-bplk0/pub?hl=en_US&hl=en_US&hl=en_US&output=html';
       function init0() {Tabletop0.init0( { key: public_spreadsheet_url0,callback:showInfo0,simpleSheet: true } );}

       window.addEventListener('DOMContentLoaded', init0)

             function showInfo0(data) {
               var mNum0 = 0;
               while (data[mNum0]){
                   $("#calendar2").append("<div id='day" + mNum0 + "' class='day'>" + data[mNum0].Start + "<div class='project-detail " + data[mNum0].Subc + "' onclick='choose(" + mNum0 + ");init3();showInvoice();pushInvoice();'>" + data[mNum0].Task1 + "</div></div>");
                   mNum0++;
               }}
     </script>

     <div class="calendar-wrapper anim-y">
      <div id="calendar2" class="calendar">

      </div>
     </div>
    </div>
   </div>
  </div>
 </div>
</div>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script  src="./home.js"></script>


  <script>

  var invoiceNumber;
  function choose(choice){
    document.getElementById('invoiceNow').innerHTML = choice;
    document.getElementById('invoiceNow2').innerHTML = choice;
}
  </script>


  <script>


    var public_spreadsheet_url3 = 'https://docs.google.com/spreadsheets/d/1iwOPspV8n7cdAnM9vRq32nJqUU3tw3dcfM4Uz-bplk0/pub?hl=en_US&hl=en_US&hl=en_US&output=html';
    function init3() {Tabletop3.init3( { key: public_spreadsheet_url3,callback: showInfo3,simpleSheet: true } );}

window.addEventListener('DOMContentLoaded', init3)

          function showInfo3(data) {
            invoiceNumber = document.getElementById('invoiceNow').innerHTML;
            document.getElementById("invoiceAddress").innerHTML = data[invoiceNumber].Address;
            document.getElementById("startTime2").innerHTML = data[invoiceNumber].Month + ", " + data[invoiceNumber].Start + " " + data[invoiceNumber].Year;
            document.getElementById("clientName").innerHTML = data[invoiceNumber].First + " " + data[invoiceNumber].Last;
            document.getElementById("finish1").innerHTML = data[invoiceNumber].Finish;
            document.getElementById("code").innerHTML = data[invoiceNumber].Code;
            document.getElementById("code2").innerHTML = data[invoiceNumber].Code;
            document.getElementById("part1").innerHTML = data[invoiceNumber].Part1;
            document.getElementById("part2").innerHTML = data[invoiceNumber].Part2;
            document.getElementById("part3").innerHTML = data[invoiceNumber].Part3;
            document.getElementById("part4").innerHTML = data[invoiceNumber].Part4;
            document.getElementById("modifications1").innerHTML = data[invoiceNumber].Modifications;
            document.getElementById("notes1").innerHTML = data[invoiceNumber].Notes;
            document.getElementById("hashKey").innerHTML = data[invoiceNumber].Hash;


            function myFunction2(){window.open(data[invoiceNumber].Invoice);}
            document.getElementById("invoiceSend").addEventListener("click", myFunction2);

          }

  </script>

<script>


  var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/1iwOPspV8n7cdAnM9vRq32nJqUU3tw3dcfM4Uz-bplk0/pub?hl=en_US&hl=en_US&hl=en_US&output=html';
  function init() {Tabletop.init( { key: public_spreadsheet_url,callback: showInfo,simpleSheet: true } );}
        function showInfo(data) {
          for (var mNum = 0; mNum < data.length; mNum++){
            $("popup2").append(
            "<div class='msg selected-bg anim-y'><input type='checkbox' name='msg' id='mail" + mNum + "' class='mail-choice' onclick='choose(" + mNum + ");init3();showInvoice();' unchecked><label for='mail" + mNum + "'></label><div class='msg-content'><div class='msg-title'>"
             + data[mNum].Task1 + "</div><div class='msg-date'>" + data[mNum].Month + " " + data[mNum].Start + ", " + data[mNum].Year + "</div></div></div>");
}}

</script>

<script>
function sendAgain(){
  document.getElementById("sendIT").innerHTML = "Send Again?";
}
function validateEmail(){
  window.location.href = "mailto:woodmortar@gmail.com?Subject=Task%20" + document.getElementById("code").innerHTML + "%20Walkthrough&body=Ive%20completed%20the%20project%0A" + document.getElementById("hashKey").innerHTML;
}
function validateInvoice(){
document.getElementById("loginModal").innerHTML = "You have CLocked in for project " + document.getElementById("code").innerHTML + "<br><br><button style='margin-left:10px;' onclick='closeModal()'>Close</button>";
document.getElementById("myModal").style.display = "block";
}
function pushInvoice (){
  document.getElementById("mainCheck").click();
}
function showInvoice(){
  document.getElementById('paperInvoice').style.display = 'block';
}
function hideInvoice(){
  document.getElementById('paperInvoice').style.display = 'none';
}
function completeProject(){
  if (document.getElementById("flags").innerHTML != "0" ){
document.getElementById("loginModal").innerHTML = document.getElementById("flags").innerHTML + "<br><br><button style='margin-left:10px;' onclick='closeModal()'>Close</button>";
document.getElementById("myModal").style.display = "block";
}}


</script>




  <script>
    $('#user').click(function() {

        $('#contracts').css({
            'display': 'inline-block'
        });
        $('#mail').css({
            'display': 'none'
        });                      });

  $('#clip').click(function() {
      $('#contracts').css({
          'display': 'none'
      });
      $('#mail').css({
          'display': 'inline-block'
      });                   });
  </script>

<script>



  var toggleVisibility = function(element) {
    if(element.style.display=='block'){
        element.style.display='none';
    } else {
        element.style.display='block';
    }
  }


  var location;
  var project;
  var task;
  var fName;
  var userImage;

  function startGeoLookup() {
    navigator.geolocation.getCurrentPosition(success, error);
     $('.overlay, .loader').fadeIn('fast');
   }

  function success(pos) {
    $('.overlay, .loader').fadeOut('fast');
    var crd = pos.coords;
    var tme = pos.timestamp;
    var d = new Date(tme);
    var t = new Date(tme);
    // alert("Altitude: " + crd.altitude + " \nAltitudeAccuracy: " + crd.altitudeAccuracy);
    var roundAcc = Math.floor(crd.accuracy);
    document.getElementById('hiddenLocation').innerHTML = crd.latitude + '<br>' + crd.longitude;
  }

  /* Error Codes: 1 PERMISSION_DENIED, 2 POSITION_UNAVAILABLE, 3 TIMEOUT */
  function error(err) {
    var geoerror = (err.code == (1, 2, 3) ? "Error loading" : err.message);
    document.getElementById('hiddenLocation').innerHTML = geoerror;
    $('.overlay, .loader').fadeOut('fast');
  }


  function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();
  document.getElementById('fName').innerHTML = profile.getName();
  document.getElementById('gEmail').innerHTML = profile.getEmail();
  document.getElementById('profilePic').src = profile.getImageUrl();
  (function()
{
if( window.localStorage )
{
if( !localStorage.getItem('firstLoad') )
{
localStorage['firstLoad'] = true;
window.location.reload();
}
else
localStorage.removeItem('firstLoad');
document.getElementById("loginModal").innerHTML = "Refresh Page";
}
})();
  }

        function onSignInCallback(resp) {
          gapi.client.load('plus', 'v1', apiClientLoaded);
        }

        /**
         * Sets up an API call after the Google API client loads.
         */
        function apiClientLoaded() {
          gapi.client.plus.people.get({userId: 'me'}).execute(handleEmailResponse);
        }


          function formAdmin(){

                  var codeSend = document.getElementById('code2').innerHTML;
                  var locationSend = document.getElementById('hiddenLocation').innerHTML;
                  var nameSend = document.getElementById('fName').innerHTML;

                    $.ajax({
                      url: "https://docs.google.com/forms/u/1/d/e/1FAIpQLSfN2kkQpPALiBnKuXyfW-iRYivAp_CutzqngiAo_KSzi664QQ/formResponse",
                      data:  { "entry.569412235" : nameSend , "entry.320157692" : codeSend , "entry.1143322173" : locationSend },
                      type: "POST",
                      dataType: "xml",
                      statusCode: {
                        0: function () {
                  //					alert("Click -OK- to submit message");
                        },
                        200: function () {
                  //					alert("Click -OK- to submit message");
                        }
                            }
                    });
                  }


</script>


<script>
function closeModal(){
  document.getElementById("myModal").style.display = "none";
}

var loginVal = "Not Validated";

var public_spreadsheet_url2 = 'https://docs.google.com/spreadsheets/d/19LJeD4yJcuHpwan3USroCUd0K9e3huBsilo5LCi2E4M/pub?hl=en_US&hl=en_US&hl=en_US&output=html';
function init2() {Tabletop2.init2( { key: public_spreadsheet_url2,callback: showInfo2,simpleSheet: true } );}
window.addEventListener('DOMContentLoaded', init2);


                 function showInfo2(data) {
                      for (var mNum2 = 0; mNum2 < data.length; mNum2++){
                       if (document.getElementById('gEmail').innerHTML == data[mNum2].Email){
                         document.getElementById("compTasks").innerHTML = data[mNum2].Completed;
                         document.getElementById("planTasks").innerHTML = data[mNum2].Planned;
                         document.getElementById("compTasks2").innerHTML = data[mNum2].Completed;
                         document.getElementById("planTasks2").innerHTML = data[mNum2].Planned;
                         document.getElementById("finishTasks").innerHTML = data[mNum2].Finish;
                         document.getElementById("totalSalary").innerHTML = data[mNum2].Salary;
                         document.getElementById("flags").innerHTML = data[mNum2].Flags;
                         document.getElementById("fName").innerHTML = data[mNum2].First + " " + data[mNum2].Last;
                         document.getElementById("gEmail").innerHTML = data[mNum2].Email;
                         $("#progBar").css('width', data[mNum2].Finish);
                          closeModal();
                          document.getElementById("loginModal").innerHTML = "Validated";
                          completeProject();

                       }}}

</script>
<script>
if (document.getElementById("loginModal").innerHTML == "Validated"){
  (function()
{
if( window.localStorage )
{
if( !localStorage.getItem('firstLoad') )
{
localStorage['firstLoad'] = true;
window.location.reload();
}
else
localStorage.removeItem('firstLoad');
document.getElementById("loginModal").innerHTML = "Refresh Page";
}
})();
}
</script>

<script  src="js/tabletop0.js"></script>
<script  src="js/tabletop.js"></script>
<script  src="js/tabletop2.js"></script>
<script  src="js/tabletop3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</body>
</html>
