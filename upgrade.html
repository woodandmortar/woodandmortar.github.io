<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>Wood&Mortar</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <META NAME="KEYWORDS" CONTENT="property maintenance, home improvement, home repair, house repair, house improvement, design, home design, designers, kitchen remodel, bathroom remodel, kitchen design, kitchen makeover, improvement, kitchen, bathroom, small kitchen remodel, Painters, Painting, woodworking, tile, home repair, Contractors, Home, Home Renovations, Wood, wood&mortar, wood & mortar, brick, stucco, Wood and Mortar, WoodandMortar">
        <META NAME="ROBOTS" CONTENT="ALL,FOLLOW">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="description" content="Kansas City Contractors">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" sizes="180x180" href="pics/wm.png">
        <link rel="icon" type="image/png" href="pics/wm.png" sizes="32x32">
        <link rel="icon" type="image/png" href="pics/wm.png" sizes="16x16">
        <link rel="mask-icon" href="pics/wm.png" color="#fff">
        <link rel="shortcut icon" href="pics/wm.png">
        <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="./styles/main.css">
    <script src="./scripts/chatbot.js"></script>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="876802948446-hq89rbp43opigb73ks5soa3c3gmqmnrj.apps.googleusercontent.com">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>

          <!-- Global site tag (gtag.js) - Google Analytics -->
          <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123535120-1"></script>
          <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-123535120-1');
          </script>

  </head>
  <body>
  <main class="page__main">
  <div class="g-signin2" data-onsuccess="onSignIn"></div>
    <div class="block--background">
      <div class="chatbot__overview">
        <ul class="chatlist">
          <li class="bot__output bot__output--standard"><img id="profilePic" src="pics/wm.png" style="width:100px"><br/><span id="vresp2"></span></li>
          <li class="bot__output bot__output--standard">Your schedule: <span id="vresp3">Please Login</span></li>
          <li class="bot__output bot__output--standard">Materials Needed: <span id="vresp5">Please Login</span></li>
          <li class="bot__output bot__output--standard">
            <span class="bot__output--second-sentence">What can I help you with?</span>
            <ul>
              <li class="input__nested-list">Something <span class="bot__command">about</span> Wood&Mortar</li>
              <li class="input__nested-list"><span id="vresp4"></span><span class="bot__command">'s best work</span></li>
              <li class="input__nested-list">Maybe I could <span class="bot__command">help</span> (for more instructions)</li>
              <li class="input__nested-list">Type <span class="bot__command">commands</span> for a list of every command</li>
            </ul>
            Your current location is reading:<br/>
            <span id="vresp">Need permission</span>
          </li>
        </ul>
      </div>
      <div class="chatbox-area">
        <form action="" id="chatform">
            <textarea placeholder="Talk to me!" class="chatbox" name="chatbox" resize: "none" minlength="2"></textarea>
            <input class="submit-button" type="submit" value="send">
        </form>
      </div>
    </div>




<script>

  function startGeoLookup() {
    navigator.geolocation.getCurrentPosition(success, error);
     $('.overlay, .loader').fadeIn('fast');
  }
  startGeoLookup();

  // On Signin

  function success(pos) {
    $('.overlay, .loader').fadeOut('fast');
    var crd = pos.coords;
    var tme = pos.timestamp;
    var d = new Date(tme);
    var t = new Date(tme);
    // alert("Altitude: " + crd.altitude + " \nAltitudeAccuracy: " + crd.altitudeAccuracy);
    var roundAcc = Math.floor(crd.accuracy);
    var location = crd.latitude + ' ' + crd.longitude;
  }

  /* Error Codes: 1 PERMISSION_DENIED, 2 POSITION_UNAVAILABLE, 3 TIMEOUT */
  function error(err) {
    var geoerror = (err.code == (1, 2, 3) ? "Error loading" : err.message);
    document.getElementById('vresp').innerHTML = geoerror;
    $('.overlay, .loader').fadeOut('fast');
  }

  function onSignIn(googleUser) {
    var profile = googleUser.getBasicProfile();
    var fName = profile.getName();
    var userImage = profile.getImageUrl();
    document.getElementById('vresp2').innerHTML = profile.getName();
    document.getElementById('vresp4').innerHTML = profile.getName();
    document.getElementById('profilePic').src = userImage;

    // Verifies google account on location access and runs this code

      switch(profile.getEmail()){
        default:
        document.getElementById('vresp3').innerHTML = 'Complete Drywall at 2635 N 22nd St';
        document.getElementById('vresp5').innerHTML = 'Mud knife, Mud pan, tape, sandpaper, sponge, texture, texture hopper, knockdown knife.';
            break;
            case 'micheal.mfg@gmail.com':
            document.getElementById("main-contact-form").action = "https://docs.google.com/forms/d/e/1FAIpQLSdvXT57YthGUIFqmd_4yFu8Wm1QkkVgFO7kf3DLTdTmdvRVVg/formResponse";
            document.getElementById('vresp3').innerHTML = 'Meeting at 9am Martiny Bid, 1030am second meeting with Heather Stiller, 1200am Complete Drywall house';
            document.getElementById('vresp5').innerHTML = 'Ipad, tape, compressor, hose, batteries, Mud knife, Mud pan, tape, sandpaper sponge, texture, texture hopper, knockdown knife.';
                  break;
            case 'woodmortar@gmail.com':
            document.getElementById('vresp3').innerHTML = 'Meeting at 9am Martiny Bid, 1030am second meeting with Heather Stiller, 1200am Complete Drywall house';
            document.getElementById('vresp5').innerHTML = 'Ipad, tape, compressor, hose, batteries, Mud knife, Mud pan, tape, sandpaper sponge, texture, texture hopper, knockdown knife.';
                                                      break;
            case 'crycellaf@gmail.com':
            document.getElementById('vresp3').innerHTML = 'Meeting at 9am Martiny Bid, 1030am second meeting with Heather Stiller, 1200am Complete Drywall house';
            document.getElementById('vresp5').innerHTML = 'Ipad, tape, compressor, hose, batteries, Mud knife, Mud pan, tape, sandpaper sponge, texture, texture hopper, knockdown knife.';
                                                      break;
            case 'ci.lead.developer@gmail.com':
            document.getElementById('vresp3').innerHTML = 'Meeting at 9am Martiny Bid, 1030am second meeting with Heather Stiller, 1200am Complete Drywall house';
            document.getElementById('vresp5').innerHTML = 'Ipad, tape, compressor, hose, batteries, Mud knife, Mud pan, tape, sandpaper sponge, texture, texture hopper, knockdown knife.';
                                                      break;
            case 'claporgetbang@gmail.com':
            document.getElementById('vresp3').innerHTML = 'Complete Drywall at 2635 N 22nd St';
            document.getElementById('vresp5').innerHTML = 'Mud knife, Mud pan, tape, sandpaper sponge, texture, texture hopper, knockdown knife.';
                                                      break;
            case 'scott.randall.w@gmail.com':
            document.getElementById('vresp3').innerHTML = '900 till 1030, Walkthrough with WoodandMortar. Begin house prep and Bathroom Demo.';
            document.getElementById('vresp5').innerHTML = 'Notepad, basic tools, crowbar, trashbags, and prep materials.';
                                                      break;
      }
    // End of switch statement
  }

  function onSignInCallback(resp) {
    gapi.client.load('plus', 'v1', apiClientLoaded);
  }

  /**
   * Sets up an API call after the Google API client loads.
   */
  function apiClientLoaded() {
    gapi.client.plus.people.get({userId: 'me'}).execute(handleEmailResponse);
  }

</script>




  </body>
</html>
